<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.299">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Programming assignment 2</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#instructions" id="toc-instructions" class="nav-link" data-scroll-target="#instructions">Instructions</a>
  <ul class="collapse">
  <li><a href="#praat" id="toc-praat" class="nav-link" data-scroll-target="#praat">Praat</a></li>
  <li><a href="#rrstudio" id="toc-rrstudio" class="nav-link" data-scroll-target="#rrstudio">R/RStudio</a></li>
  <li><a href="#github" id="toc-github" class="nav-link" data-scroll-target="#github">github</a></li>
  </ul></li>
  <li><a href="#evaluation" id="toc-evaluation" class="nav-link" data-scroll-target="#evaluation">Evaluation</a></li>
  <li><a href="#tips" id="toc-tips" class="nav-link" data-scroll-target="#tips">Tips</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Programming assignment 2</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p><strong>Topics</strong>: Github, Rmarkdown, RStudio projects, Praat</p>
<section id="overview" class="level1">
<h1>Overview</h1>
<p>In this programming assignment you will focus on getting data from Praat using more advanced programming methods (scripts, loops). Specifically, you will make recordings, segment them, and calculate metrics related to lexical stress. Next, you will save the data, load it into <code>R</code>, analyze it and plot it using <code>ggplot2</code>. You will write a reproducible report using <code>RMarkdown</code> that will be hosted on <code>github</code>.</p>
<p><strong>Assigned</strong>: Week 7<br>
<strong>Due</strong>: Monday, 3/18 before 5pm</p>
</section>
<section id="instructions" class="level1">
<h1>Instructions</h1>
<section id="praat" class="level2">
<h2 class="anchored" data-anchor-id="praat">Praat</h2>
<ol type="1">
<li>Get some data:
<ul>
<li>Record a new sound object named <code>stim</code>. While recording, repeat the following word pairs (hint: leave about 1 sec between each word):
<ul>
<li>pinto/pintó</li>
<li>testo/testó</li>
<li>capo/capó</li>
<li>quemo/quemó</li>
<li>pujo/pujó</li>
</ul></li>
<li>Create a textgrid for <code>stim</code>:
<ul>
<li>The textgrid should contain one tier, an interval tier called <code>words</code></li>
<li>Select the sound object and corresponding textgrid and click <code>View &amp; Edit</code></li>
<li>Use the <code>words</code> tier to mark the beginning and end of each item you recorded (leave a bit of time before and after)</li>
<li>Inside the item interval, type the name of the item plus <code>_1</code> or <code>_2</code> depending on whether the first or second syllable is stressed. For example, the item <code>pinto</code> should be labeled as <code>pinto_1</code> and the item <code>pintó</code> should be labeled as <code>pinto_2</code>. (Hint: this should take about 2 or 3 minutes… if it is taking you longer you are probably doing it wrong)</li>
</ul></li>
<li>Create project
<ul>
<li>Create a directory on your desktop called <code>pa_2</code></li>
<li>Create a subdirectory inside <code>pa_2</code> called <code>scripts</code></li>
<li>Create a subdirectory inside <code>pa_2</code> called <code>data</code></li>
<li>Create a subdirectory inside <code>pa_2</code> called <code>stim</code></li>
<li>Create 2 subdirectories inside <code>stim</code> called <code>master</code> and <code>segmented</code></li>
</ul></li>
<li>Save the sound and textgrid objects:
<ul>
<li>inside the <code>master</code> folder (i.e., pa_2 &gt; stim &gt; master)</li>
<li>as a .wav file (stim.wav)</li>
<li>as a .TextGrid file (a text file, stim.TextGrid)</li>
</ul></li>
</ul></li>
<li>Script 1
<ul>
<li>Copy the following praat code into a new praat script and save it in the folder <code>scripts</code> as <code>segment_items.praat</code>:</li>
</ul></li>
</ol>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>form Save intervals to small sound files</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    comment Give the folder where to save the sound files<span class="sc">:</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    sentence Folder ..<span class="sc">/</span>stim<span class="sc">/</span>segmented<span class="sc">/</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>endform</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>soundname<span class="sc">$</span> <span class="er">=</span> selected<span class="sc">$</span> (<span class="st">"TextGrid"</span>, <span class="dv">1</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>select TextGrid <span class="st">'soundname$'</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>numberOfIntervals <span class="ot">=</span> Get number of intervals... <span class="dv">1</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>end_at <span class="ot">=</span> numberOfIntervals</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>files <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>intervalstart <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>intervalend <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>interval <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>intnumber <span class="ot">=</span> <span class="dv">1</span> <span class="sc">-</span> <span class="dv">1</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>intname<span class="sc">$</span> <span class="er">=</span> <span class="st">""</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>intervalfile<span class="sc">$</span> <span class="er">=</span> <span class="st">""</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>endoffile <span class="ot">=</span> Get finishing time</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> interval from <span class="dv">1</span> to end_at</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>    xxx<span class="sc">$</span> <span class="er">=</span> Get label of interval... <span class="dv">1</span> interval</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    check <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> xxx<span class="sc">$</span> <span class="er">=</span> <span class="st">""</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>        check <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>    endif</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> check <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>       files <span class="ot">=</span> files <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>    endif</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>endfor</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a>interval <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>textfilename<span class="sc">$</span> <span class="er">=</span> <span class="st">"'folder$'"</span> <span class="sc">+</span> <span class="st">"0_"</span> <span class="sc">+</span> <span class="st">"'soundname$'"</span> <span class="sc">+</span> <span class="st">"_"</span> <span class="sc">+</span> <span class="st">"to"</span> <span class="sc">+</span> <span class="st">"'files'"</span> <span class="sc">+</span> <span class="st">".txt"</span></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> interval from <span class="dv">1</span> to end_at</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>    select TextGrid <span class="st">'soundname$'</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>    intname<span class="sc">$</span> <span class="er">=</span> <span class="st">""</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>    intname<span class="sc">$</span> <span class="er">=</span> Get label of interval... <span class="dv">1</span> interval</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a>    check <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> intname<span class="sc">$</span> <span class="er">=</span> <span class="st">""</span></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a>        check <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>    endif</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> check <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>        intnumber <span class="ot">=</span> intnumber <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a>        intervalstart <span class="ot">=</span> Get starting point... <span class="dv">1</span> interval</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> intervalstart <span class="sc">&gt;</span> <span class="fl">0.01</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>                intervalstart <span class="ot">=</span> intervalstart <span class="sc">-</span> <span class="fl">0.01</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span></span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a>                intervalstart <span class="ot">=</span> <span class="dv">0</span></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a>            endif</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a>        intervalend <span class="ot">=</span> Get end point... <span class="dv">1</span> interval</span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> intervalend <span class="sc">&lt;</span> endoffile <span class="sc">-</span> <span class="fl">0.01</span></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a>                intervalend <span class="ot">=</span> intervalend <span class="sc">+</span> <span class="fl">0.01</span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span></span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a>                intervalend <span class="ot">=</span> endoffile</span>
<span id="cb1-56"><a href="#cb1-56" aria-hidden="true" tabindex="-1"></a>            endif</span>
<span id="cb1-57"><a href="#cb1-57" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-58"><a href="#cb1-58" aria-hidden="true" tabindex="-1"></a>        select Sound <span class="st">'soundname$'</span></span>
<span id="cb1-59"><a href="#cb1-59" aria-hidden="true" tabindex="-1"></a>        Extract part... intervalstart intervalend rectangular <span class="dv">1</span> no</span>
<span id="cb1-60"><a href="#cb1-60" aria-hidden="true" tabindex="-1"></a>        intervalfile<span class="sc">$</span> <span class="er">=</span> <span class="st">"'folder$'"</span> <span class="sc">+</span> <span class="st">"'intname$'"</span> <span class="sc">+</span> <span class="st">".wav"</span></span>
<span id="cb1-61"><a href="#cb1-61" aria-hidden="true" tabindex="-1"></a>        Write to WAV file... <span class="st">'intervalfile$'</span></span>
<span id="cb1-62"><a href="#cb1-62" aria-hidden="true" tabindex="-1"></a>        Remove</span>
<span id="cb1-63"><a href="#cb1-63" aria-hidden="true" tabindex="-1"></a>        select TextGrid <span class="st">'soundname$'</span></span>
<span id="cb1-64"><a href="#cb1-64" aria-hidden="true" tabindex="-1"></a>        intname<span class="sc">$</span> <span class="er">=</span> <span class="st">"'intname$'"</span> <span class="sc">+</span> <span class="st">"'newline$'"</span></span>
<span id="cb1-65"><a href="#cb1-65" aria-hidden="true" tabindex="-1"></a>        fileappend <span class="st">"'textfilename$'"</span> <span class="st">'intname$'</span></span>
<span id="cb1-66"><a href="#cb1-66" aria-hidden="true" tabindex="-1"></a>    endif</span>
<span id="cb1-67"><a href="#cb1-67" aria-hidden="true" tabindex="-1"></a>endfor</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="3" type="1">
<li>Create individual .wav files for each item
<ul>
<li>Open the <code>segment_items.praat</code> script in praat</li>
<li>Select the <code>stim</code> item and corresponding textgrid</li>
<li>From the praat script window type <code>command r</code> (control on windows) to run the script</li>
<li>Check the <code>stim &gt; segmented</code> folder. There should be individual wav files for each item (Hint: the files are named based on info you provided in the interval tiers, you can delete the wav files, edit the textgrid, and run the script again if necessary)</li>
</ul></li>
<li>Segment individual .wav files
<ul>
<li>For each .wav file in <code>segmented</code> do the following:
<ul>
<li>open the wav file in praat</li>
<li>create a textgrid with an interval tier named <code>first_vowel</code> and a point tier named <code>mid_point</code></li>
<li>Select the wav file and corresponding textgrid, click view and edit</li>
<li>In the <code>first_vowel</code> tier mark the beginning and end of the first vowel (no need to type anything in the interval)</li>
<li>In the <code>mid_point</code> tier mark the (approximate) mid point of the first vowel (no need to type anything in the mid point)</li>
<li>Save the textgrid as a text file inside the folder <code>segmented</code> (Hint: you should end up with one textgrid for every .wav file. You have recorded and segmented 10 items, therefore there should be 20 files, plus the <code>0_stim_to10.txt</code> info file)</li>
</ul></li>
</ul></li>
<li>Extract duration (ms), pitch (hz), and intensity (dB)
<ul>
<li>Examine the praat code below.</li>
</ul></li>
</ol>
<div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Set path to folder where files are</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="do">### add code</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>path<span class="sc">$</span> <span class="er">=</span> </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="do">### here ⬆</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Create output file and set header</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>sep<span class="sc">$</span> <span class="er">=</span> <span class="st">","</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>writeFileLine<span class="sc">:</span> <span class="st">"../data/data.csv"</span>,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  ...<span class="st">"info"</span>       <span class="sc">+</span> sep<span class="sc">$</span> <span class="sc">+</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  ...<span class="st">"durationV"</span>  <span class="sc">+</span> sep<span class="sc">$</span> <span class="sc">+</span> </span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  ...<span class="st">"f0"</span>         <span class="sc">+</span> sep<span class="sc">$</span> <span class="sc">+</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  ...<span class="st">"int"</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Prepare loop</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Go to folder where files are located, create list</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>Create Strings as file list<span class="sc">:</span> <span class="st">"fileList"</span>, path<span class="sc">$</span> <span class="sc">+</span> <span class="st">"*.wav"</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a><span class="co"># Select the object fileList</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>selectObject<span class="sc">:</span> <span class="st">"Strings fileList"</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Count # of files and assign total to 'numFiles'</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>numFiles <span class="ot">=</span> Get number of strings</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a><span class="co"># Start loop</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a><span class="co">#</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i from <span class="dv">1</span> to numFiles</span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Select string, read in files</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>    select Strings fileList</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>    fileName<span class="sc">$</span> <span class="er">=</span> Get string... i</span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>    prefix<span class="sc">$</span> <span class="er">=</span> fileName<span class="sc">$</span> <span class="sc">-</span> <span class="st">".wav"</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>    Read from file... <span class="st">'path$'</span><span class="sc">/</span><span class="st">'prefix$'</span>.wav</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a>    Read from file... <span class="st">'path$'</span><span class="sc">/</span><span class="st">'prefix$'</span>.TextGrid</span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Calculate mid-point of vowel</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>    vowelStart <span class="ot">=</span> Get starting point<span class="sc">:</span> <span class="dv">1</span>, <span class="dv">2</span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>    vowelEnd <span class="ot">=</span> Get starting point<span class="sc">:</span> <span class="dv">1</span>, <span class="dv">3</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a>    durationV <span class="ot">=</span> vowelEnd <span class="sc">-</span> vowelStart</span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>    mp <span class="ot">=</span> Get time of point<span class="sc">:</span> <span class="dv">2</span>, <span class="dv">1</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get f0 at midpoint</span></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a>    select Sound <span class="st">'prefix$'</span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a>    To Pitch<span class="sc">:</span> <span class="dv">0</span>, <span class="dv">75</span>, <span class="dv">600</span></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>    f0 <span class="ot">=</span> Get value at time<span class="sc">:</span> mp, <span class="st">"Hertz"</span>, <span class="st">"Linear"</span></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Get intensity at midpoint</span></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>    select Sound <span class="st">'prefix$'</span></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a>    To Intensity<span class="sc">:</span> <span class="dv">100</span>, <span class="dv">0</span>, <span class="st">"yes"</span></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>    int <span class="ot">=</span> Get value at time<span class="sc">:</span> mp, <span class="st">"Cubic"</span></span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Append data to .csv file</span></span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>    fileappend <span class="st">"../data/data.csv"</span> <span class="st">'prefix$'</span>,<span class="st">'durationV:2'</span>,<span class="st">'f0:2'</span>,<span class="st">'int:2''newline$'</span></span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Printline for bug fixes (comment out for speed)</span></span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a>    printline <span class="st">'prefix$'</span>,<span class="st">'durationV:2'</span>,<span class="st">'f0:2'</span>,<span class="st">'int:2'</span></span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Clean up</span></span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>    select all</span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>    minus Strings fileList</span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a>    Remove</span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>endfor</span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean objects</span></span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a>select all</span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a>Remove</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><br> <strong>Note</strong></p>
<ul>
<li>Notice that it is a simple loop that is incomplete.</li>
<li>You need to finish the loop by adding a line of code between the parts where you see:</li>
</ul>
<pre><code>### add code

### here ⬆</code></pre>
<p>…otherwise it will not run. Copy and paste the code into a new praat script. Save it with the name <code>extract_dur_f0_int.praat</code> inside the <code>scripts</code> folder, then fix it so that it runs.</p>
<p><br></p>
</section>
<section id="rrstudio" class="level2">
<h2 class="anchored" data-anchor-id="rrstudio">R/RStudio</h2>
<ol start="6" type="1">
<li>Turn <code>pa_2</code> into an RStudio project</li>
<li>Create a <code>README.Rmd</code> file and set the output as <code>github_document</code> (see <code>pa_1</code> if you don’t remember). Save it in the root directory of <code>pa_2</code>.</li>
<li>Load the necessary packages and read in the <code>data.csv</code> file into R (use an R chunk)</li>
<li>Manipulate the dataframe as necessary so that you can calculate average duration, f0 and intensity as a function of lexical stress (extra points if you can create a plot)</li>
</ol>
</section>
<section id="github" class="level2">
<h2 class="anchored" data-anchor-id="github">github</h2>
<ol start="10" type="1">
<li>Create a github repository for your project (call it <code>pa_2</code>). Commit changes and push them to github. Create a new issue and tag me (<span class="citation" data-cites="jvcasillas">@jvcasillas</span>)</li>
</ol>
</section>
</section>
<section id="evaluation" class="level1">
<h1>Evaluation</h1>
<p>This is programming assignment 2 of 4. It is worth 10 of the 40 possible points. In order to receive full credit you must complete steps 1-10 above, and follow all the instructions.</p>
<table class="table">
<thead>
<tr class="header">
<th style="text-align: left;">Task</th>
<th style="text-align: right;">Points</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Create the described project structure</td>
<td style="text-align: right;">0.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">Create master stim wav and textgrid files</td>
<td style="text-align: right;">0.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Segment master file for individual items</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Correctly segment individual items</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Fix loop and extract data</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Create an RStudio project</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Create an Rmarkdown README file</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Calculate duration, intensity and F0 averages</td>
<td style="text-align: right;">3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Create <code>pa_2</code> repo</td>
<td style="text-align: right;">0.5</td>
</tr>
<tr class="even">
<td style="text-align: left;">Commit and push to repo, tag me</td>
<td style="text-align: right;">0.5</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><strong>Total</strong></td>
<td style="text-align: right;">10</td>
</tr>
</tbody>
</table>
<p><br><br><br></p>
</section>
<section id="tips" class="level1">
<h1>Tips</h1>
<ul>
<li>In order to successfully complete this assignment you have to pay special attention to the naming conventions and directory structure outlined in the instructions. Praat and R are picky regarding special characters and capitalized characters. This is annoying, but ultimately important. Basically you just have to make sure you follow the instructions.</li>
<li>Regarding praat scripting: It can take a lot of time to get decent at programming (in Praat, R, or any other language). Don’t get too frustrated. I encourage you to spend time thinking about the scripts. Try to follow them line by line to understand what they do. Make note of things you don’t understand at all and things that make sense. Change things in the scripts (break them) and try to make them do something different. Ask your classmates to explain what they do and don’t understand. It gets easier, but only if you work at understanding why the code works.</li>
</ul>
<p><br><br><br></p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>